{"openapi":"3.0.1","info":{"title":"Carpooling API","description":"API documentation for Carpooling Application - Ứng dụng chia sẻ chuyến đi","version":"1.0.0"},"servers":[{"url":"https://carpooling-j5xn.onrender.com","description":"Generated server url"}],"security":[{"Bearer Authentication":[]}],"tags":[{"name":"Notifications","description":"API quản lý thông báo"},{"name":"Tracking","description":"API theo dõi vị trí người dùng"},{"name":"User","description":"API quản lý thông tin người dùng"},{"name":"Admin","description":"API quản lý dành cho quản trị viên"},{"name":"Rides","description":"API quản lý chuyến đi"},{"name":"Chat","description":"API quản lý tin nhắn và phòng chat"},{"name":"Authentication","description":"API xác thực và đăng ký người dùng"},{"name":"Passenger","description":"API dành cho hành khách"},{"name":"Driver","description":"API dành cho tài xế"}],"paths":{"/api/user/update-profile":{"put":{"tags":["User"],"summary":"Cập nhật thông tin cá nhân ","description":"Thay đổi thông tin cá nhân","operationId":"updateProfile","requestBody":{"content":{"application/json":{"schema":{"required":["userUpdateRequestDTO"],"type":"object","properties":{"userUpdateRequestDTO":{"$ref":"#/components/schemas/UserUpdateRequestDTO"}}}}}},"responses":{"200":{"description":"Thay đổi thông tin thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}},"400":{"description":"Thay đổi thông tin thất bại","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/user/change-pass":{"put":{"tags":["User"],"summary":"Thay đổi mặt khẩu ","description":"Nhập mật khẩu cũ để thay đổi mật khẩu","operationId":"changePass","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePassDTO"}}},"required":true},"responses":{"200":{"description":"Thay đổi mật khẩu thành công","content":{"application/json":{"schema":{"type":"object"}}}},"400":{"description":"Thay đổi mật khẩu thất bại","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/api/ride/update/{id}":{"put":{"tags":["Rides"],"summary":"Cập nhật chuyến đi","description":"Tài xế cập nhật thông tin chuyến đi đã tạo.","operationId":"updateRide","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RideRequestDTO"}}},"required":true},"responses":{"500":{"description":"Lỗi hệ thống khi cập nhật chuyến đi","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}},"200":{"description":"Cập nhật chuyến đi thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}},"400":{"description":"Yêu cầu không hợp lệ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/ride/cancel/{id}":{"put":{"tags":["Rides"],"summary":"Huỷ chuyến đi","description":"Tài xế có thể huỷ một chuyến đi theo ID.","operationId":"deleteRide","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"500":{"description":"Lỗi hệ thống khi huỷ chuyến đi","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}},"200":{"description":"Huỷ bỏ chuyến đi thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}},"400":{"description":"Yêu cầu không hợp lệ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/passenger/passenger-confirm/{rideId}":{"put":{"tags":["Passenger"],"summary":"Xác nhận hoàn thành chuyến đi","description":"Hành khách xác nhận đã hoàn thành chuyến đi","operationId":"passengerConfirm","parameters":[{"name":"rideId","in":"path","description":"ID của chuyến đi cần xác nhận","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"400":{"description":"Xác nhận thất bại","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseBookingDTO"}}}},"200":{"description":"Xác nhận thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseBookingDTO"}}}}}}},"/api/passenger/cancel-bookings/{rideId}":{"put":{"tags":["Passenger"],"summary":"Hủy đặt chỗ","description":"Hành khách hủy đặt chỗ cho một chuyến đi","operationId":"cancelBooking","parameters":[{"name":"rideId","in":"path","description":"ID của chuyến đi cần hủy đặt chỗ","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"400":{"description":"Hủy đặt chỗ thất bại","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseBookingDTO"}}}},"200":{"description":"Hủy đặt chỗ thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseBookingDTO"}}}}}}},"/api/notifications/{id}/read":{"put":{"tags":["Notifications"],"summary":"Đánh dấu thông báo đã đọc","description":"Đánh dấu một thông báo cụ thể là đã đọc","operationId":"markAsRead","parameters":[{"name":"id","in":"path","description":"ID của thông báo cần đánh dấu","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"500":{"description":"Lỗi máy chủ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseVoid"}}}},"200":{"description":"Đánh dấu thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseVoid"}}}}}}},"/api/notifications/read-all":{"put":{"tags":["Notifications"],"summary":"Đánh dấu tất cả thông báo đã đọc","description":"Đánh dấu tất cả thông báo của người dùng là đã đọc","operationId":"markAllAsRead","responses":{"500":{"description":"Lỗi máy chủ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseVoid"}}}},"200":{"description":"Đánh dấu thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseVoid"}}}}}}},"/api/driver/reject/{bookingId}":{"put":{"tags":["Driver"],"summary":"Từ chối đặt chỗ","description":"Tài xế từ chối yêu cầu đặt chỗ của hành khách","operationId":"driverRejectBooking","parameters":[{"name":"bookingId","in":"path","description":"ID của booking cần từ chối","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Từ chối thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseString"}}}},"500":{"description":"Lỗi máy chủ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseString"}}}},"404":{"description":"Không tìm thấy booking","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseString"}}}}}}},"/api/driver/complete/{rideId}":{"put":{"tags":["Driver"],"summary":"Xác nhận hoàn thành chuyến đi","description":"Tài xế xác nhận đã hoàn thành chuyến đi","operationId":"driverMarkCompleted","parameters":[{"name":"rideId","in":"path","description":"ID của chuyến đi cần xác nhận hoàn thành","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Xác nhận thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseString"}}}},"500":{"description":"Lỗi máy chủ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseString"}}}}}}},"/api/driver/accept/{bookingId}":{"put":{"tags":["Driver"],"summary":"Chấp nhận đặt chỗ","description":"Tài xế chấp nhận yêu cầu đặt chỗ của hành khách","operationId":"driverAcceptBooking","parameters":[{"name":"bookingId","in":"path","description":"ID của booking cần chấp nhận","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"500":{"description":"Lỗi máy chủ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseString"}}}},"404":{"description":"Không tìm thấy booking","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseString"}}}},"200":{"description":"Chấp nhận thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseString"}}}}}}},"/api/chat/{roomId}/mark-read":{"put":{"tags":["Chat"],"summary":"Đánh dấu tin nhắn đã đọc","description":"Đánh dấu tất cả tin nhắn trong phòng chat là đã đọc","operationId":"markMessagesAsRead","parameters":[{"name":"roomId","in":"path","description":"ID của phòng chat","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"Lỗi máy chủ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseVoid"}}}},"200":{"description":"Đánh dấu thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseVoid"}}}}}}},"/api/tracking/test/{rideId}":{"post":{"tags":["Tracking"],"summary":"Test gửi vị trí driver","description":"Dùng để Swagger test, phát hành vị trí qua Redis","operationId":"testTracking","parameters":[{"name":"rideId","in":"path","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrackingPayloadDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseTrackingPayloadDTO"}}}}}}},"/api/ride":{"post":{"tags":["Rides"],"summary":"Tạo chuyến đi","description":"Tài xế tạo một chuyến đi mới với thông tin điểm đi, điểm đến, thời gian và số ghế.","operationId":"createRide","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RideRequestDTO"}}},"required":true},"responses":{"500":{"description":"Lỗi hệ thống khi tạo chuyến đi","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}},"201":{"description":"Tạo chuyến đi thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}},"400":{"description":"Yêu cầu không hợp lệ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/passenger/booking/{rideId}":{"post":{"tags":["Passenger"],"summary":"Đặt chỗ cho chuyến đi","description":"Hành khách đặt chỗ cho một chuyến đi cụ thể","operationId":"bookRides","parameters":[{"name":"rideId","in":"path","description":"ID của chuyến đi cần đặt chỗ","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"seats","in":"query","description":"Số ghế cần đặt","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"Đặt chỗ thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseBookingDTO"}}}},"400":{"description":"Đặt chỗ thất bại","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseBookingDTO"}}}}}}},"/api/chat/test/{roomId}":{"post":{"tags":["Chat"],"summary":"Gửi tin nhắn qua HTTP","description":"Gửi tin nhắn qua HTTP thay vì WebSocket (chủ yếu dùng để test)","operationId":"sendViaPostman","parameters":[{"name":"roomId","in":"path","description":"ID của phòng chat","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatMessageDTO"}}},"required":true},"responses":{"200":{"description":"Gửi tin nhắn thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseChatMessageDTO"}}}},"500":{"description":"Lỗi máy chủ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseChatMessageDTO"}}}},"401":{"description":"Không tìm thấy người dùng","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseChatMessageDTO"}}}}}}},"/api/auth/passenger-register":{"post":{"tags":["Authentication"],"summary":"Đăng ký tài khoản hành khách","description":"Đăng ký tài khoản mới với vai trò hành khách","operationId":"passengerRegister","parameters":[{"name":"email","in":"query","description":"Email đăng nhập","required":true,"schema":{"type":"string"}},{"name":"password","in":"query","description":"Mật khẩu","required":true,"schema":{"type":"string"}},{"name":"fullName","in":"query","description":"Họ và tên","required":true,"schema":{"type":"string"}},{"name":"phone","in":"query","description":"Số điện thoại","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"avatarImage":{"type":"string","description":"Ảnh đại diện (tùy chọn)","format":"binary"}}}}}},"responses":{"400":{"description":"Dữ liệu không hợp lệ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseUserDTO"}}}},"409":{"description":"Email đã tồn tại","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseUserDTO"}}}},"201":{"description":"Đăng ký thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseUserDTO"}}}}}}},"/api/auth/login":{"post":{"tags":["Authentication"],"summary":"Đăng nhập","description":"Xác thực người dùng và trả về token JWT","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Đăng nhập thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}},"401":{"description":"Đăng nhập thất bại","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/auth/driver-register":{"post":{"tags":["Authentication"],"summary":"Đăng ký tài khoản tài xế","description":"Đăng ký tài khoản mới với vai trò tài xế, bao gồm thông tin xe","operationId":"driverRegister","parameters":[{"name":"email","in":"query","description":"Email đăng nhập","required":true,"schema":{"type":"string"}},{"name":"phone","in":"query","description":"Số điện thoại","required":true,"schema":{"type":"string"}},{"name":"password","in":"query","description":"Mật khẩu","required":true,"schema":{"type":"string"}},{"name":"fullName","in":"query","description":"Họ và tên","required":true,"schema":{"type":"string"}},{"name":"licensePlate","in":"query","description":"Biển số xe","required":true,"schema":{"type":"string"}},{"name":"brand","in":"query","description":"Hãng xe","required":true,"schema":{"type":"string"}},{"name":"model","in":"query","description":"Mẫu xe","required":true,"schema":{"type":"string"}},{"name":"color","in":"query","description":"Màu xe","required":true,"schema":{"type":"string"}},{"name":"numberOfSeats","in":"query","description":"Số ghế","required":true,"schema":{"type":"integer","format":"int32"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"avatarImage":{"type":"string","description":"Ảnh đại diện (tùy chọn)","format":"binary"},"licenseImage":{"type":"string","description":"Ảnh giấy phép lái xe (tùy chọn)","format":"binary"},"vehicleImage":{"type":"string","description":"Ảnh xe (tùy chọn)","format":"binary"}}}}}},"responses":{"400":{"description":"Dữ liệu không hợp lệ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseDriverDTO"}}}},"409":{"description":"Email đã tồn tại","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseDriverDTO"}}}},"201":{"description":"Đăng ký thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseDriverDTO"}}}}}}},"/api/admin/user/reject/{id}":{"post":{"tags":["Admin"],"summary":"Từ chối đăng ký tài xế","description":"Từ chối đăng ký tài xế và gửi thông báo cho người dùng với lý do từ chối.","operationId":"rejectUser","parameters":[{"name":"id","in":"path","description":"ID của người dùng cần từ chối","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"rejectionReason","in":"query","description":"Lý do từ chối đăng ký tài xế","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Từ chối tài xế thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseBoolean"}}}},"400":{"description":"Từ chối tài xế thất bại","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseBoolean"}}}}}}},"/api/admin/user/approved/{id}":{"post":{"tags":["Admin"],"summary":"Chấp nhận đăng ký tài xế","description":"Chấp nhận đăng ký tài xế và gửi thông báo cho người dùng.","operationId":"approveUser","parameters":[{"name":"id","in":"path","description":"ID của người dùng cần chấp nhận","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Chấp nhận tài xế thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}},"400":{"description":"Chấp nhận tài xế thất bại","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/ride/{id}":{"get":{"tags":["Rides"],"summary":"Xem chi tiết chuyến đi","description":"Xem thông tin chi tiết của chuyến đi theo ID.","operationId":"getRideById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"404":{"description":"Chuyến đi không tồn tại","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}},"200":{"description":"Danh sách chuyến đi","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}},"500":{"description":"Lỗi khi lấy thông tin chuyến đi","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/ride/search":{"get":{"tags":["Rides"],"summary":"Tìm kiếm chuyến đi","description":"Hành khách có thể tìm kiếm chuyến đi theo điểm đi, điểm đến, ngày khởi hành và số ghế trống.","operationId":"searchRides","parameters":[{"name":"departure","in":"query","required":false,"schema":{"type":"string"}},{"name":"destination","in":"query","required":false,"schema":{"type":"string"}},{"name":"startTime","in":"query","required":false,"schema":{"type":"string","format":"date"}},{"name":"seats","in":"query","required":false,"schema":{"type":"integer","format":"int32"}}],"responses":{"500":{"description":"Lỗi khi tìm chuyến đi","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListRideRequestDTO"}}}},"200":{"description":"Tìm chuyến đi thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListRideRequestDTO"}}}}}}},"/api/ride/available":{"get":{"tags":["Rides"],"summary":"Danh sách chuyến đi đang hoạt động","description":"Lấy tất cả chuyến đi còn hiệu lực (chưa hủy, chưa hoàn thành).","operationId":"getAllRideActive","responses":{"200":{"description":"success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListRideRequestDTO"}}}},"500":{"description":"Lỗi khi lấy danh sách chuyến đi","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListRideRequestDTO"}}}}}}},"/api/ride/all-rides":{"get":{"tags":["Rides"],"summary":"Lấy tất cả chuyến đi","description":"Trả về danh sách toàn bộ chuyến đi trong hệ thống (dành cho quản trị hoặc tài xế).","operationId":"getAllRide","responses":{"500":{"description":"Lỗi khi lấy tất cả chuyến đi","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}},"200":{"description":"Tất cả chuyến đi","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/passenger/profile":{"get":{"tags":["Passenger"],"summary":"Lấy thông tin cá nhân hành khách","description":"Trả về thông tin chi tiết của hành khách đã đăng nhập","operationId":"getProfile","responses":{"404":{"description":"Không tìm thấy người dùng","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseUserDTO"}}}},"500":{"description":"Lỗi máy chủ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseUserDTO"}}}},"200":{"description":"Lấy thông tin thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseUserDTO"}}}}}}},"/api/passenger/bookings":{"get":{"tags":["Passenger"],"summary":"Lấy danh sách đặt chỗ của hành khách","description":"Trả về danh sách các đặt chỗ của hành khách đã đăng nhập","operationId":"getPassengerBookings","responses":{"200":{"description":"Lấy danh sách thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListBookingDTO"}}}},"500":{"description":"Lỗi máy chủ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListBookingDTO"}}}}}}},"/api/passenger/booking/{bookingId}":{"get":{"tags":["Passenger"],"summary":"Lấy chi tiết đặt chỗ","description":"Trả về thông tin chi tiết của một đặt chỗ cụ thể","operationId":"getBookingDetail","parameters":[{"name":"bookingId","in":"path","description":"ID của booking cần xem chi tiết","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"500":{"description":"Lỗi máy chủ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseBookingDTO"}}}},"200":{"description":"Lấy thông tin thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseBookingDTO"}}}},"404":{"description":"Không tìm thấy booking","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseBookingDTO"}}}},"403":{"description":"Không có quyền truy cập","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseBookingDTO"}}}}}}},"/api/notifications":{"get":{"tags":["Notifications"],"summary":"Lấy danh sách thông báo","description":"Trả về danh sách thông báo của người dùng đã đăng nhập","operationId":"getNotifications","responses":{"200":{"description":"Lấy danh sách thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListNotification"}}}},"500":{"description":"Lỗi máy chủ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListNotification"}}}}}}},"/api/notifications/unread-count":{"get":{"tags":["Notifications"],"summary":"Đếm số thông báo chưa đọc","description":"Trả về số lượng thông báo chưa đọc của người dùng","operationId":"countUnreadNotifications","responses":{"500":{"description":"Lỗi máy chủ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseLong"}}}},"200":{"description":"Đếm thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseLong"}}}}}}},"/api/driver/profile":{"get":{"tags":["Driver"],"summary":"Lấy thông tin cá nhân tài xế","description":"Trả về thông tin chi tiết của tài xế đã đăng nhập","operationId":"getProfile_1","responses":{"404":{"description":"Không tìm thấy người dùng","content":{"application/json":{"schema":{"type":"object"}}}},"500":{"description":"Lỗi máy chủ","content":{"application/json":{"schema":{"type":"object"}}}},"401":{"description":"Không có quyền truy cập","content":{"application/json":{"schema":{"type":"object"}}}},"200":{"description":"Lấy thông tin thành công","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/api/driver/my-rides":{"get":{"tags":["Driver"],"summary":"Lấy danh sách chuyến đi của tài xế","description":"Trả về danh sách các chuyến đi do tài xế đã đăng nhập tạo ra","operationId":"getRide","responses":{"200":{"description":"Lấy danh sách thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListRideRequestDTO"}}}},"500":{"description":"Lỗi máy chủ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListRideRequestDTO"}}}}}}},"/api/driver/bookings":{"get":{"tags":["Driver"],"summary":"Lấy danh sách đặt chỗ của tài xế","description":"Trả về danh sách các đặt chỗ cho các chuyến đi của tài xế đã đăng nhập","operationId":"getDriverBookings","responses":{"200":{"description":"Lấy danh sách thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListBookingDTO"}}}},"500":{"description":"Lỗi máy chủ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListBookingDTO"}}}}}}},"/api/chat/{roomId}":{"get":{"tags":["Chat"],"summary":"Lấy tin nhắn của phòng chat","description":"Trả về danh sách tin nhắn của một phòng chat cụ thể","operationId":"getMessages","parameters":[{"name":"roomId","in":"path","description":"ID của phòng chat","required":true,"schema":{"type":"string"}}],"responses":{"403":{"description":"Không có quyền truy cập phòng chat","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListChatMessageDTO"}}}},"500":{"description":"Lỗi máy chủ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListChatMessageDTO"}}}},"200":{"description":"Lấy tin nhắn thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListChatMessageDTO"}}}}}}},"/api/chat/rooms":{"get":{"tags":["Chat"],"summary":"Lấy danh sách phòng chat","description":"Trả về danh sách các phòng chat của người dùng hiện tại","operationId":"getChatRooms","responses":{"200":{"description":"Lấy danh sách thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListMapStringObject"}}}},"500":{"description":"Lỗi máy chủ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListMapStringObject"}}}}}}},"/api/chat/room/{otherUserEmail}":{"get":{"tags":["Chat"],"summary":"Lấy ID phòng chat","description":"Tạo hoặc lấy ID phòng chat giữa người dùng hiện tại và một người dùng khác","operationId":"getChatRoomId","parameters":[{"name":"otherUserEmail","in":"path","description":"Email của người dùng khác","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"Không tìm thấy người dùng","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseString"}}}},"200":{"description":"Lấy ID phòng chat thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseString"}}}},"500":{"description":"Lỗi máy chủ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseString"}}}}}}},"/api/admin/user/{id}":{"get":{"tags":["Admin"],"summary":"Lấy thông tin chi tiết của người dùng","description":"Trả về thông tin chi tiết của người dùng theo ID.","operationId":"getUserDetail","parameters":[{"name":"id","in":"path","description":"ID của người dùng cần xem thông tin","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"400":{"description":"Không thể tìm thấy người dùng","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseDriverDTO"}}}},"200":{"description":"Lấy thông tin người dùng thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseDriverDTO"}}}}}}},"/api/admin/user/role":{"get":{"tags":["Admin"],"summary":"Lấy danh sách người dùng theo vai trò","description":"Trả về danh sách người dùng theo vai trò được chỉ định. Nếu không có vai trò nào được chỉ định, trả về tất cả người dùng.","operationId":"getAlUser","parameters":[{"name":"role","in":"query","description":"Vai trò của người dùng (ADMIN, DRIVER, PASSENGER)","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"Lấy danh sách người dùng thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListObject"}}}},"500":{"description":"Lỗi máy chủ khi lấy danh sách người dùng","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListObject"}}}}}}},"/api/admin/user/delete/{id}":{"delete":{"tags":["Admin"],"summary":"Xóa người dùng","description":"Xóa người dùng khỏi hệ thống theo ID và gửi thông báo cho người dùng đó.","operationId":"deleteUser","parameters":[{"name":"id","in":"path","description":"ID của người dùng cần xóa","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"500":{"description":"Lỗi máy chủ khi xóa người dùng","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}},"404":{"description":"Không tìm thấy người dùng","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}},"200":{"description":"Xóa người dùng thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}}},"components":{"schemas":{"UserUpdateRequestDTO":{"required":["brand","color","fullName","licensePlate","model","numberOfSeats","phone"],"type":"object","properties":{"phone":{"pattern":"^(0[3|5|7|8|9])[0-9]{8}$","type":"string"},"fullName":{"type":"string"},"licensePlate":{"pattern":"^[0-9]{2}[A-Z]{1,2}-[0-9]{4,6}$","type":"string"},"brand":{"type":"string"},"model":{"type":"string"},"color":{"type":"string"},"numberOfSeats":{"minimum":1,"type":"integer","format":"int32"},"vehicleImageUrl":{"type":"string","format":"binary"},"licenseImageUrl":{"type":"string","format":"binary"},"avatarImageUrl":{"type":"string","format":"binary"}}},"ApiResponseObject":{"type":"object","properties":{"message":{"type":"string"},"statusCode":{"type":"integer","format":"int32"},"data":{"type":"object"},"success":{"type":"boolean"}}},"ChangePassDTO":{"type":"object","properties":{"oldPass":{"type":"string"},"newPass":{"type":"string"}}},"RideRequestDTO":{"required":["departure","destination","endAddress","endDistrict","endLat","endLng","endProvince","endWard","pricePerSeat","startAddress","startDistrict","startLat","startLng","startProvince","startTime","startWard","totalSeat"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"availableSeats":{"type":"integer","format":"int32"},"driverName":{"type":"string"},"driverEmail":{"type":"string"},"departure":{"type":"string"},"startLat":{"type":"number","format":"double"},"startLng":{"type":"number","format":"double"},"startAddress":{"type":"string"},"startWard":{"type":"string"},"startDistrict":{"type":"string"},"startProvince":{"type":"string"},"endLat":{"type":"number","format":"double"},"endLng":{"type":"number","format":"double"},"endAddress":{"type":"string"},"endWard":{"type":"string"},"endDistrict":{"type":"string"},"endProvince":{"type":"string"},"destination":{"type":"string"},"startTime":{"type":"string","format":"date-time"},"pricePerSeat":{"type":"number"},"totalSeat":{"type":"integer","format":"int32"},"status":{"type":"string","enum":["ACTIVE","IN_PROGRESS","DRIVER_CONFIRMED","COMPLETED","CANCELLED"]}}},"ApiResponseBookingDTO":{"type":"object","properties":{"message":{"type":"string"},"statusCode":{"type":"integer","format":"int32"},"data":{"$ref":"#/components/schemas/BookingDTO"},"success":{"type":"boolean"}}},"BookingDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"rideId":{"type":"integer","format":"int64"},"seatsBooked":{"type":"integer","format":"int32"},"status":{"type":"string","enum":["PENDING","ACCEPTED","IN_PROGRESS","PASSENGER_CONFIRMED","DRIVER_CONFIRMED","COMPLETED","CANCELLED","REJECTED"]},"createdAt":{"type":"string","format":"date-time"},"totalPrice":{"type":"number"},"departure":{"type":"string"},"destination":{"type":"string"},"startTime":{"type":"string","format":"date-time"},"pricePerSeat":{"type":"number"},"rideStatus":{"type":"string"},"totalSeats":{"type":"integer","format":"int32"},"availableSeats":{"type":"integer","format":"int32"},"driverId":{"type":"integer","format":"int64"},"driverName":{"type":"string"},"driverPhone":{"type":"string"},"driverEmail":{"type":"string"},"driverAvatarUrl":{"type":"string"},"driverStatus":{"type":"string"},"vehicle":{"$ref":"#/components/schemas/VehicleDTO"},"passengerId":{"type":"integer","format":"int64"},"passengerName":{"type":"string"},"passengerPhone":{"type":"string"},"passengerEmail":{"type":"string"},"passengerAvatarUrl":{"type":"string"},"fellowPassengers":{"type":"array","items":{"$ref":"#/components/schemas/PassengerInfoDTO"}}}},"PassengerInfoDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"phone":{"type":"string"},"email":{"type":"string"},"avatarUrl":{"type":"string"},"status":{"type":"string","enum":["PENDING","ACCEPTED","IN_PROGRESS","PASSENGER_CONFIRMED","DRIVER_CONFIRMED","COMPLETED","CANCELLED","REJECTED"]},"seatsBooked":{"type":"integer","format":"int32"}}},"VehicleDTO":{"type":"object","properties":{"licensePlate":{"type":"string"},"brand":{"type":"string"},"model":{"type":"string"},"color":{"type":"string"},"numberOfSeats":{"type":"integer","format":"int32"},"vehicleImageUrl":{"type":"string"},"licenseImageUrl":{"type":"string"},"licenseImagePublicId":{"type":"string"},"vehicleImagePublicId":{"type":"string"}}},"ApiResponseVoid":{"type":"object","properties":{"message":{"type":"string"},"statusCode":{"type":"integer","format":"int32"},"data":{"type":"object"},"success":{"type":"boolean"}}},"ApiResponseString":{"type":"object","properties":{"message":{"type":"string"},"statusCode":{"type":"integer","format":"int32"},"data":{"type":"string"},"success":{"type":"boolean"}}},"TrackingPayloadDTO":{"type":"object","properties":{"rideId":{"type":"string"},"driverEmail":{"type":"string"},"latitude":{"type":"number","format":"double"},"longitude":{"type":"number","format":"double"},"timestamp":{"type":"string","format":"date-time"}}},"ApiResponseTrackingPayloadDTO":{"type":"object","properties":{"message":{"type":"string"},"statusCode":{"type":"integer","format":"int32"},"data":{"$ref":"#/components/schemas/TrackingPayloadDTO"},"success":{"type":"boolean"}}},"ChatMessageDTO":{"type":"object","properties":{"token":{"type":"string"},"senderEmail":{"type":"string"},"receiverEmail":{"type":"string"},"senderName":{"type":"string"},"content":{"type":"string"},"roomId":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"read":{"type":"boolean"}},"description":"Nội dung tin nhắn"},"ApiResponseChatMessageDTO":{"type":"object","properties":{"message":{"type":"string"},"statusCode":{"type":"integer","format":"int32"},"data":{"$ref":"#/components/schemas/ChatMessageDTO"},"success":{"type":"boolean"}}},"ApiResponseUserDTO":{"type":"object","properties":{"message":{"type":"string"},"statusCode":{"type":"integer","format":"int32"},"data":{"$ref":"#/components/schemas/UserDTO"},"success":{"type":"boolean"}}},"UserDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"avatarUrl":{"type":"string"},"fullName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"},"role":{"type":"string"}}},"LoginRequest":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}},"description":"Thông tin đăng nhập"},"ApiResponseDriverDTO":{"type":"object","properties":{"message":{"type":"string"},"statusCode":{"type":"integer","format":"int32"},"data":{"$ref":"#/components/schemas/DriverDTO"},"success":{"type":"boolean"}}},"DriverDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"status":{"type":"string","enum":["PENDING","APPROVED","REJECTED"]},"avatarImage":{"type":"string"},"fullName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"},"role":{"type":"string"},"licensePlate":{"type":"string"},"brand":{"type":"string"},"model":{"type":"string"},"color":{"type":"string"},"numberOfSeats":{"type":"integer","format":"int32"},"vehicleImageUrl":{"type":"string"},"licenseImageUrl":{"type":"string"}}},"ApiResponseBoolean":{"type":"object","properties":{"message":{"type":"string"},"statusCode":{"type":"integer","format":"int32"},"data":{"type":"boolean"},"success":{"type":"boolean"}}},"ApiResponseListRideRequestDTO":{"type":"object","properties":{"message":{"type":"string"},"statusCode":{"type":"integer","format":"int32"},"data":{"type":"array","items":{"$ref":"#/components/schemas/RideRequestDTO"}},"success":{"type":"boolean"}}},"ApiResponseListBookingDTO":{"type":"object","properties":{"message":{"type":"string"},"statusCode":{"type":"integer","format":"int32"},"data":{"type":"array","items":{"$ref":"#/components/schemas/BookingDTO"}},"success":{"type":"boolean"}}},"ApiResponseListNotification":{"type":"object","properties":{"message":{"type":"string"},"statusCode":{"type":"integer","format":"int32"},"data":{"type":"array","items":{"$ref":"#/components/schemas/Notification"}},"success":{"type":"boolean"}}},"Notification":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"userEmail":{"type":"string"},"title":{"type":"string"},"content":{"type":"string"},"type":{"type":"string"},"referenceId":{"type":"integer","format":"int64"},"createdAt":{"type":"string","format":"date-time"},"read":{"type":"boolean"}}},"ApiResponseLong":{"type":"object","properties":{"message":{"type":"string"},"statusCode":{"type":"integer","format":"int32"},"data":{"type":"integer","format":"int64"},"success":{"type":"boolean"}}},"ApiResponseListChatMessageDTO":{"type":"object","properties":{"message":{"type":"string"},"statusCode":{"type":"integer","format":"int32"},"data":{"type":"array","items":{"$ref":"#/components/schemas/ChatMessageDTO"}},"success":{"type":"boolean"}}},"ApiResponseListMapStringObject":{"type":"object","properties":{"message":{"type":"string"},"statusCode":{"type":"integer","format":"int32"},"data":{"type":"array","items":{"type":"object","additionalProperties":{"type":"object"}}},"success":{"type":"boolean"}}},"ApiResponseListObject":{"type":"object","properties":{"message":{"type":"string"},"statusCode":{"type":"integer","format":"int32"},"data":{"type":"array","items":{"type":"object"}},"success":{"type":"boolean"}}}},"securitySchemes":{"Bearer Authentication":{"type":"http","description":"JWT token for authentication. Format: Bearer {token}","scheme":"bearer","bearerFormat":"JWT"}}}}