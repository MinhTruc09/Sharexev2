{"openapi":"3.0.1","info":{"title":"Carpooling API","description":"API documentation for Carpooling Application - Ứng dụng chia sẻ chuyến đi","version":"1.0.0"},"servers":[{"url":"https://carpooling-j5xn.onrender.com","description":"Generated server url"}],"security":[{"Bearer Authentication":[]}],"paths":{"/api/user/update-profile":{"put":{"tags":["user-controller"],"operationId":"updateProfile","requestBody":{"content":{"application/json":{"schema":{"required":["userUpdateRequestDTO"],"type":"object","properties":{"userUpdateRequestDTO":{"$ref":"#/components/schemas/UserUpdateRequestDTO"}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/user/change-pass":{"put":{"tags":["user-controller"],"operationId":"changePass","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePassDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/api/ride/update/{id}":{"put":{"tags":["ride-controller"],"operationId":"updateRide","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RideRequestDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/ride/cancel/{id}":{"put":{"tags":["ride-controller"],"operationId":"deleteRide","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/passenger/passenger-confirm/{rideId}":{"put":{"tags":["passenger-controller"],"operationId":"passengerConfirm","parameters":[{"name":"rideId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseBookingDTO"}}}}}}},"/api/passenger/cancel-bookings/{rideId}":{"put":{"tags":["passenger-controller"],"operationId":"cancelBooking","parameters":[{"name":"rideId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseBookingDTO"}}}}}}},"/api/notifications/{id}/read":{"put":{"tags":["notification-controller"],"operationId":"markAsRead","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseVoid"}}}}}}},"/api/notifications/read-all":{"put":{"tags":["notification-controller"],"operationId":"markAllAsRead","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseVoid"}}}}}}},"/api/driver/reject/{bookingId}":{"put":{"tags":["driver-controller"],"operationId":"driverRejectBooking","parameters":[{"name":"bookingId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseString"}}}}}}},"/api/driver/complete/{rideId}":{"put":{"tags":["driver-controller"],"operationId":"driverMarkCompleted","parameters":[{"name":"rideId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseString"}}}}}}},"/api/driver/accept/{bookingId}":{"put":{"tags":["driver-controller"],"operationId":"driverAcceptBooking","parameters":[{"name":"bookingId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseString"}}}}}}},"/api/chat/{roomId}/mark-read":{"put":{"tags":["chat-controller"],"operationId":"markMessagesAsRead","parameters":[{"name":"roomId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseVoid"}}}}}}},"/api/ride":{"post":{"tags":["ride-controller"],"operationId":"createRide","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RideRequestDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/passenger/booking/{rideId}":{"post":{"tags":["passenger-controller"],"operationId":"bookRides","parameters":[{"name":"rideId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"seats","in":"query","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseBookingDTO"}}}}}}},"/api/chat/test/{roomId}":{"post":{"tags":["chat-controller"],"operationId":"sendViaPostman","parameters":[{"name":"roomId","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatMessageDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseChatMessageDTO"}}}}}}},"/api/auth/passenger-register":{"post":{"tags":["auth-controller"],"operationId":"passengerRegister","parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string"}},{"name":"password","in":"query","required":true,"schema":{"type":"string"}},{"name":"fullName","in":"query","required":true,"schema":{"type":"string"}},{"name":"phone","in":"query","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"avatarImage":{"type":"string","format":"binary"}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseUserDTO"}}}}}}},"/api/auth/login":{"post":{"tags":["auth-controller"],"operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/auth/driver-register":{"post":{"tags":["auth-controller"],"operationId":"driverRegister","parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string"}},{"name":"phone","in":"query","required":true,"schema":{"type":"string"}},{"name":"password","in":"query","required":true,"schema":{"type":"string"}},{"name":"fullName","in":"query","required":true,"schema":{"type":"string"}},{"name":"licensePlate","in":"query","required":true,"schema":{"type":"string"}},{"name":"brand","in":"query","required":true,"schema":{"type":"string"}},{"name":"model","in":"query","required":true,"schema":{"type":"string"}},{"name":"color","in":"query","required":true,"schema":{"type":"string"}},{"name":"numberOfSeats","in":"query","required":true,"schema":{"type":"integer","format":"int32"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"avatarImage":{"type":"string","format":"binary"},"licenseImage":{"type":"string","format":"binary"},"vehicleImage":{"type":"string","format":"binary"}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseDriverDTO"}}}}}}},"/api/admin/user/reject/{id}":{"post":{"tags":["admin-controller"],"operationId":"rejectUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"rejectionReason","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseBoolean"}}}}}}},"/api/admin/user/approved/{id}":{"post":{"tags":["admin-controller"],"operationId":"approveUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/ride/{id}":{"get":{"tags":["ride-controller"],"operationId":"getRideById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/ride/search":{"get":{"tags":["ride-controller"],"operationId":"searchRides","parameters":[{"name":"departure","in":"query","required":false,"schema":{"type":"string"}},{"name":"destination","in":"query","required":false,"schema":{"type":"string"}},{"name":"startTime","in":"query","required":false,"schema":{"type":"string","format":"date"}},{"name":"seats","in":"query","required":false,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListRideRequestDTO"}}}}}}},"/api/ride/available":{"get":{"tags":["ride-controller"],"operationId":"getAllRideActive","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListRideRequestDTO"}}}}}}},"/api/ride/all-rides":{"get":{"tags":["ride-controller"],"operationId":"getAllRide","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/passenger/profile":{"get":{"tags":["passenger-controller"],"operationId":"getProfile","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseUserDTO"}}}}}}},"/api/passenger/bookings":{"get":{"tags":["passenger-controller"],"operationId":"getPassengerBookings","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListBookingDTO"}}}}}}},"/api/passenger/booking/{bookingId}":{"get":{"tags":["passenger-controller"],"operationId":"getBookingDetail","parameters":[{"name":"bookingId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseBookingDTO"}}}}}}},"/api/notifications":{"get":{"tags":["notification-controller"],"operationId":"getNotifications","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListNotification"}}}}}}},"/api/notifications/unread-count":{"get":{"tags":["notification-controller"],"operationId":"countUnreadNotifications","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseLong"}}}}}}},"/api/driver/profile":{"get":{"tags":["driver-controller"],"operationId":"getProfile_1","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/api/driver/my-rides":{"get":{"tags":["driver-controller"],"operationId":"getRide","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListRideRequestDTO"}}}}}}},"/api/driver/bookings":{"get":{"tags":["driver-controller"],"operationId":"getDriverBookings","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListBookingDTO"}}}}}}},"/api/chat/{roomId}":{"get":{"tags":["chat-controller"],"operationId":"getMessages","parameters":[{"name":"roomId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListChatMessageDTO"}}}}}}},"/api/chat/rooms":{"get":{"tags":["chat-controller"],"operationId":"getChatRooms","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListMapStringObject"}}}}}}},"/api/chat/room/{otherUserEmail}":{"get":{"tags":["chat-controller"],"operationId":"getChatRoomId","parameters":[{"name":"otherUserEmail","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseString"}}}}}}},"/api/admin/user/{id}":{"get":{"tags":["admin-controller"],"operationId":"getUserDetail","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseDriverDTO"}}}}}}},"/api/admin/user/role":{"get":{"tags":["admin-controller"],"operationId":"getAlUser","parameters":[{"name":"role","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseListObject"}}}}}}},"/api/admin/user/delete/{id}":{"delete":{"tags":["admin-controller"],"operationId":"deleteUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}}},"components":{"schemas":{"UserUpdateRequestDTO":{"required":["brand","color","fullName","licensePlate","model","numberOfSeats","phone"],"type":"object","properties":{"phone":{"pattern":"^(0[3|5|7|8|9])[0-9]{8}$","type":"string"},"fullName":{"type":"string"},"licensePlate":{"pattern":"^[0-9]{2}[A-Z]{1,2}-[0-9]{4,6}$","type":"string"},"brand":{"type":"string"},"model":{"type":"string"},"color":{"type":"string"},"numberOfSeats":{"minimum":1,"type":"integer","format":"int32"},"vehicleImageUrl":{"type":"string","format":"binary"},"licenseImageUrl":{"type":"string","format":"binary"},"avatarImageUrl":{"type":"string","format":"binary"}}},"ApiResponseObject":{"type":"object","properties":{"message":{"type":"string"},"data":{"type":"object"},"success":{"type":"boolean"}}},"ChangePassDTO":{"type":"object","properties":{"oldPass":{"type":"string"},"newPass":{"type":"string"}}},"RideRequestDTO":{"required":["departure","destination","endAddress","endDistrict","endLat","endLng","endProvince","endWard","pricePerSeat","startAddress","startDistrict","startLat","startLng","startProvince","startTime","startWard","totalSeat"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"availableSeats":{"type":"integer","format":"int32"},"driverName":{"type":"string"},"driverEmail":{"type":"string"},"departure":{"type":"string"},"startLat":{"type":"number","format":"double"},"startLng":{"type":"number","format":"double"},"startAddress":{"type":"string"},"startWard":{"type":"string"},"startDistrict":{"type":"string"},"startProvince":{"type":"string"},"endLat":{"type":"number","format":"double"},"endLng":{"type":"number","format":"double"},"endAddress":{"type":"string"},"endWard":{"type":"string"},"endDistrict":{"type":"string"},"endProvince":{"type":"string"},"destination":{"type":"string"},"startTime":{"type":"string","format":"date-time"},"pricePerSeat":{"type":"number"},"totalSeat":{"type":"integer","format":"int32"},"status":{"type":"string","enum":["ACTIVE","IN_PROGRESS","DRIVER_CONFIRMED","COMPLETED","CANCELLED"]}}},"ApiResponseBookingDTO":{"type":"object","properties":{"message":{"type":"string"},"data":{"$ref":"#/components/schemas/BookingDTO"},"success":{"type":"boolean"}}},"BookingDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"rideId":{"type":"integer","format":"int64"},"seatsBooked":{"type":"integer","format":"int32"},"status":{"type":"string","enum":["PENDING","ACCEPTED","IN_PROGRESS","PASSENGER_CONFIRMED","DRIVER_CONFIRMED","COMPLETED","CANCELLED","REJECTED"]},"createdAt":{"type":"string","format":"date-time"},"totalPrice":{"type":"number"},"departure":{"type":"string"},"destination":{"type":"string"},"startTime":{"type":"string","format":"date-time"},"pricePerSeat":{"type":"number"},"rideStatus":{"type":"string"},"totalSeats":{"type":"integer","format":"int32"},"availableSeats":{"type":"integer","format":"int32"},"driverId":{"type":"integer","format":"int64"},"driverName":{"type":"string"},"driverPhone":{"type":"string"},"driverEmail":{"type":"string"},"driverAvatarUrl":{"type":"string"},"driverVehicleImageUrl":{"type":"string"},"driverLicenseImageUrl":{"type":"string"},"driverStatus":{"type":"string"},"passengerId":{"type":"integer","format":"int64"},"passengerName":{"type":"string"},"passengerPhone":{"type":"string"},"passengerEmail":{"type":"string"},"passengerAvatarUrl":{"type":"string"},"fellowPassengers":{"type":"array","items":{"$ref":"#/components/schemas/PassengerInfo"}}}},"PassengerInfo":{"type":"object"},"ApiResponseVoid":{"type":"object","properties":{"message":{"type":"string"},"data":{"type":"object"},"success":{"type":"boolean"}}},"ApiResponseString":{"type":"object","properties":{"message":{"type":"string"},"data":{"type":"string"},"success":{"type":"boolean"}}},"ChatMessageDTO":{"type":"object","properties":{"token":{"type":"string"},"senderEmail":{"type":"string"},"receiverEmail":{"type":"string"},"senderName":{"type":"string"},"content":{"type":"string"},"roomId":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"read":{"type":"boolean"}}},"ApiResponseChatMessageDTO":{"type":"object","properties":{"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ChatMessageDTO"},"success":{"type":"boolean"}}},"ApiResponseUserDTO":{"type":"object","properties":{"message":{"type":"string"},"data":{"$ref":"#/components/schemas/UserDTO"},"success":{"type":"boolean"}}},"UserDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"avatarUrl":{"type":"string"},"fullName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"},"role":{"type":"string"}}},"LoginRequest":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}}},"ApiResponseDriverDTO":{"type":"object","properties":{"message":{"type":"string"},"data":{"$ref":"#/components/schemas/DriverDTO"},"success":{"type":"boolean"}}},"DriverDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"status":{"type":"string","enum":["PENDING","APPROVED","REJECTED"]},"avatarImage":{"type":"string"},"fullName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"},"role":{"type":"string"},"licensePlate":{"type":"string"},"brand":{"type":"string"},"model":{"type":"string"},"color":{"type":"string"},"numberOfSeats":{"type":"integer","format":"int32"},"vehicleImageUrl":{"type":"string"},"licenseImageUrl":{"type":"string"}}},"ApiResponseBoolean":{"type":"object","properties":{"message":{"type":"string"},"data":{"type":"boolean"},"success":{"type":"boolean"}}},"ApiResponseListRideRequestDTO":{"type":"object","properties":{"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/RideRequestDTO"}},"success":{"type":"boolean"}}},"ApiResponseListBookingDTO":{"type":"object","properties":{"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/BookingDTO"}},"success":{"type":"boolean"}}},"ApiResponseListNotification":{"type":"object","properties":{"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/Notification"}},"success":{"type":"boolean"}}},"Notification":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"userEmail":{"type":"string"},"title":{"type":"string"},"content":{"type":"string"},"type":{"type":"string"},"referenceId":{"type":"integer","format":"int64"},"createdAt":{"type":"string","format":"date-time"},"read":{"type":"boolean"}}},"ApiResponseLong":{"type":"object","properties":{"message":{"type":"string"},"data":{"type":"integer","format":"int64"},"success":{"type":"boolean"}}},"ApiResponseListChatMessageDTO":{"type":"object","properties":{"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/ChatMessageDTO"}},"success":{"type":"boolean"}}},"ApiResponseListMapStringObject":{"type":"object","properties":{"message":{"type":"string"},"data":{"type":"array","items":{"type":"object","additionalProperties":{"type":"object"}}},"success":{"type":"boolean"}}},"ApiResponseListObject":{"type":"object","properties":{"message":{"type":"string"},"data":{"type":"array","items":{"type":"object"}},"success":{"type":"boolean"}}}},"securitySchemes":{"Bearer Authentication":{"type":"http","description":"JWT token for authentication. Format: Bearer {token}","scheme":"bearer","bearerFormat":"JWT"}}}}